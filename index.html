<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grocery Store Tycoon</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: #f8f8f8;
      margin: 0;
      padding: 0;
    }
    .screen {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .item {
      border: 1px solid #ccc;
      margin: 10px auto;
      padding: 10px;
      width: 80%;
      border-radius: 8px;
      background: #fff;
    }
    #storageDisplay {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>

<div id="homeScreen" class="screen active">
  <h1>ğŸª Grocery Store Tycoon</h1>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="gameScreen" class="screen">
  <h1>ğŸ“¦ Storage: <span id="storageCount">0</span>/4</h1>
  <h2>ğŸ’° Money: $<span id="money">0</span></h2>
  <div id="itemList"></div>
  <div id="storageDisplay"></div>
  <button onclick="goHome()">ğŸ  Home</button>
</div>

<script>
  const items = [
    { emoji: 'ğŸ', name: 'applleee', rate: 50, cost: 25 },
    { emoji: 'ğŸ“', name: 'strawberry', rate: 200, cost: 100 },
    { emoji: 'ğŸ«', name: 'blueberry', rate: 750, cost: 350 },
    { emoji: 'ğŸ‰', name: 'watermelon', rate: 2000, cost: 1200 },
    { emoji: 'ğŸ', name: 'bread', rate: 10, cost: 5 },
    { emoji: 'ğŸ§€', name: 'cheese', rate: 500, cost: 200 },
    { emoji: 'ğŸ¥¨', name: 'pretzel', rate: 2000, cost: 800 },
    { emoji: 'ğŸ”', name: 'burger', rate: 5000, cost: 3000 }
  ];

  let money = 0;
  let storage = [];

  const moneyEl = document.getElementById('money');
  const storageCountEl = document.getElementById('storageCount');
  const storageDisplay = document.getElementById('storageDisplay');
  const itemList = document.getElementById('itemList');

  function saveGame() {
    localStorage.setItem('grocery_money', money);
    localStorage.setItem('grocery_storage', JSON.stringify(storage));
    localStorage.setItem('last_saved', Date.now());
  }

  function loadGame() {
    const savedMoney = localStorage.getItem('grocery_money');
    const savedStorage = localStorage.getItem('grocery_storage');
    const lastSaved = localStorage.getItem('last_saved');

    if (savedMoney) money = parseFloat(savedMoney);
    if (savedStorage) storage = JSON.parse(savedStorage);

    if (lastSaved) {
      const minutesOffline = Math.floor((Date.now() - parseInt(lastSaved)) / 60000);
      const incomePerMin = storage.reduce((sum, item) => sum + item.rate, 0);
      const offlineEarnings = Math.floor(incomePerMin * 0.1 * minutesOffline);
      if (offlineEarnings > 0) {
        alert(`You earned $${offlineEarnings} while offline!`);
        money += offlineEarnings;
      }
    }
  }

  function updateUI() {
    moneyEl.textContent = Math.floor(money);
    storageCountEl.textContent = storage.length;
    storageDisplay.innerHTML = `<strong>In Storage:</strong> ${storage.map(i => i.emoji).join(' ') || 'Nothing yet'}`;
  }

  function startGame() {
    document.getElementById('homeScreen').classList.remove('active');
    document.getElementById('gameScreen').classList.add('active');
    loadGame();
    updateUI();
    displayItems();
    startEarningsLoop();
  }

  function goHome() {
    saveGame();
    document.getElementById('gameScreen').classList.remove('active');
    document.getElementById('homeScreen').classList.add('active');
  }

  function displayItems() {
    itemList.innerHTML = '';
    items.forEach((item, index) => {
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `
        ${item.emoji} <strong>${item.name}</strong><br>
        ğŸ’¸ $${item.cost} â€” ğŸ•’ $${item.rate}/min<br>
        <button onclick="buyItem(${index})">Buy</button>
      `;
      itemList.appendChild(div);
    });
  }

  function buyItem(index) {
    const item = items[index];
    if (money >= item.cost && storage.length < 4) {
      money -= item.cost;
      storage.push(item);
      updateUI();
      saveGame();
    } else {
      alert(storage.length >= 4 ? "Storage full!" : "Not enough money!");
    }
  }

  function startEarningsLoop() {
    setInterval(() => {
      const totalPerMinute = storage.reduce((sum, item) => sum + item.rate, 0);
      money += totalPerMinute / 60;
      updateUI();
    }, 1000);
  }
</script>

</body>
</html>
